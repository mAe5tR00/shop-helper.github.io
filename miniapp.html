<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–î–æ—Å—Ç–∞–≤–∫–∞</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: "Segoe UI", sans-serif;
      background: #f3f4f6;
      color: #222;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }

    header {
      padding: 15px;
      background: white;
      font-size: 18px;
      font-weight: bold;
      box-shadow: 0 2px 6px rgba(0,0,0,0.08);
      text-align: center;
    }

    main { flex: 1; overflow-y: auto; padding: 10px; }

    .section { display: none; }
    .section.active { display: block; }

    /* –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é */
    .menu-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin-top: 20px;
    }

    .menu-item {
      background: white;
      border-radius: 14px;
      padding: 20px;
      text-align: center;
      font-size: 16px;
      font-weight: 600;
      box-shadow: 0 3px 8px rgba(0,0,0,0.08);
      cursor: pointer;
      transition: 0.15s;
    }
    .menu-item:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 14px rgba(0,0,0,0.15);
    }

    /* –ö–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ */
    .product {
      background: white;
      border-radius: 12px;
      padding: 15px;
      margin-bottom: 12px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    .product img {
      width: 100%;
      border-radius: 10px;
    }

    .product-title { font-weight: 600; margin-top: 10px; }
    .product-price { color: #2ea6ff; font-weight: bold; }

    .btn {
      background: #2ea6ff;
      color: white;
      border: none;
      padding: 10px 16px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 500;
      width: 100%;
      margin-top: 10px;
    }

    /* –ö–æ—Ä–∑–∏–Ω–∞ */
    .cart-item {
      background: white;
      padding: 12px;
      margin-bottom: 10px;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.08);
    }

    .red-btn {
      background: #ff5252 !important;
    }

    .empty { text-align: center; color: #888; margin-top: 40px; }

    nav {
      display: none; /* –Ω–∞–≤–∏–≥–∞—Ü–∏—è —Å–∫—Ä—ã—Ç–∞ ‚Äî –≤—Å—ë –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é */
    }
  </style>
</head>

<body>
  <header id="header-title">–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é</header>

  <main>
    <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
    <section id="home" class="section active">
      <div class="menu-grid">
        <div class="menu-item" onclick="openPage('catalog')">–ö–∞—Ç–∞–ª–æ–≥</div>
        <div class="menu-item" onclick="openPage('cart')">–ö–æ—Ä–∑–∏–Ω–∞</div>
        <div class="menu-item" onclick="openPage('sales')">–ê–∫—Ü–∏–∏</div>
        <div class="menu-item" onclick="openPage('orders')">–ó–∞–∫–∞–∑—ã</div>
        <div class="menu-item" onclick="openPage('profile')" style="grid-column: span 2;">–ü—Ä–æ—Ñ–∏–ª—å</div>
      </div>
    </section>

    <!-- –ö–∞—Ç–∞–ª–æ–≥ -->
    <section id="catalog" class="section">
      <div class="product">
        <img src="https://i.imgur.com/pizza1.jpg">
        <div class="product-title">–ü–∏—Ü—Ü–∞ –ú–∞—Ä–≥–∞—Ä–∏—Ç–∞</div>
        <div class="product-price">2000 ‚Ç∏</div>
        <button class="btn" onclick="addToCart('–ü–∏—Ü—Ü–∞ –ú–∞—Ä–≥–∞—Ä–∏—Ç–∞', 2000)">–î–æ–±–∞–≤–∏—Ç—å</button>
      </div>

      <div class="product">
        <img src="https://i.imgur.com/pizza2.jpg">
        <div class="product-title">–ü–∏—Ü—Ü–∞ –ü–µ–ø–ø–µ—Ä–æ–Ω–∏</div>
        <div class="product-price">2400 ‚Ç∏</div>
        <button class="btn" onclick="addToCart('–ü–∏—Ü—Ü–∞ –ü–µ–ø–ø–µ—Ä–æ–Ω–∏', 2400)">–î–æ–±–∞–≤–∏—Ç—å</button>
      </div>

      <div class="product">
        <img src="https://i.imgur.com/drink1.jpg">
        <div class="product-title">–ö–æ–ª–∞ 0.5–ª</div>
        <div class="product-price">600 ‚Ç∏</div>
        <button class="btn" onclick="addToCart('–ö–æ–ª–∞ 0.5–ª', 600)">–î–æ–±–∞–≤–∏—Ç—å</button>
      </div>

      <button class="btn" style="margin-top:20px;background:#ccc;" onclick="openPage('home')">‚Üê –ù–∞–∑–∞–¥</button>
    </section>

    <!-- –ö–æ—Ä–∑–∏–Ω–∞ -->
    <section id="cart" class="section">
      <div id="cart-items"></div>
      <div id="cart-total" style="font-weight:bold;margin-top:15px;"></div>
      <button id="checkout-btn" class="btn" style="margin-top:10px;display:none;">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>

      <button class="btn" style="margin-top:20px;background:#ccc;" onclick="openPage('home')">‚Üê –ù–∞–∑–∞–¥</button>
    </section>

    <!-- –ê–∫—Ü–∏–∏ -->
    <section id="sales" class="section">
      <div class="product">
        <img src="https://i.imgur.com/sale.jpg">
        <div class="product-title">üî• 2 –ø–∏—Ü—Ü—ã + –Ω–∞–ø–∏—Ç–æ–∫ = —Å–∫–∏–¥–∫–∞ 20%</div>
        <p>–¢–æ–ª—å–∫–æ –¥–æ –∫–æ–Ω—Ü–∞ –Ω–µ–¥–µ–ª–∏</p>
      </div>

      <button class="btn" style="margin-top:20px;background:#ccc;" onclick="openPage('home')">‚Üê –ù–∞–∑–∞–¥</button>
    </section>

    <!-- –ó–∞–∫–∞–∑—ã -->
    <section id="orders" class="section">
      <p class="empty">–ü–æ–∫–∞ –Ω–µ—Ç –∑–∞–∫–∞–∑–æ–≤</p>
      <button class="btn" style="margin-top:20px;background:#ccc;" onclick="openPage('home')">‚Üê –ù–∞–∑–∞–¥</button>
    </section>

    <!-- –ü—Ä–æ—Ñ–∏–ª—å -->
    <section id="profile" class="section">
      <p><b>–í–∞—à –ø—Ä–æ—Ñ–∏–ª—å</b></p>
      <p id="user-name">–ò–º—è: –ì–æ—Å—Ç—å</p>
      <p>–ó–¥–µ—Å—å –±—É–¥—É—Ç –∞–¥—Ä–µ—Å–∞, –±–æ–Ω—É—Å—ã –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.</p>

      <button class="btn" style="margin-top:20px;background:#ccc;" onclick="openPage('home')">‚Üê –ù–∞–∑–∞–¥</button>
    </section>
  </main>

  <script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    let cart = JSON.parse(localStorage.getItem("cart") || "[]");

    function openPage(id) {
      document.querySelectorAll(".section").forEach(s => s.classList.remove("active"));
      document.getElementById(id).classList.add("active");

      // –ó–∞–≥–æ–ª–æ–≤–æ–∫
      const titles = {
        home: "–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é",
        catalog: "–ö–∞—Ç–∞–ª–æ–≥",
        cart: "–ö–æ—Ä–∑–∏–Ω–∞",
        sales: "–ê–∫—Ü–∏–∏",
        orders: "–ó–∞–∫–∞–∑—ã",
        profile: "–ü—Ä–æ—Ñ–∏–ª—å"
      };
      document.getElementById("header-title").textContent = titles[id];

      if (id === "cart") updateCart();
    }

    function addToCart(name, price) {
      cart.push({ name, price });
      localStorage.setItem("cart", JSON.stringify(cart));
      tg.HapticFeedback.notificationOccurred("success");
    }

    function updateCart() {
      const container = document.getElementById("cart-items");
      const totalEl = document.getElementById("cart-total");
      const checkoutBtn = document.getElementById("checkout-btn");

      container.innerHTML = "";
      if (cart.length === 0) {
        container.innerHTML = "<p class='empty'>–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>";
        checkoutBtn.style.display = "none";
        totalEl.textContent = "";
        return;
      }

      let total = 0;
      cart.forEach((item, i) => {
        total += item.price;
        container.innerHTML += `
          <div class="cart-item">
            ${item.name} ‚Äî ${item.price} ‚Ç∏
            <button class="btn red-btn" onclick="removeFromCart(${i})">–£–¥–∞–ª–∏—Ç—å</button>
          </div>`;
      });

      totalEl.textContent = "–ò—Ç–æ–≥–æ: " + total + " ‚Ç∏";
      checkoutBtn.style.display = "block";
      checkoutBtn.onclick = () => {
        tg.sendData(JSON.stringify({ action: "order", items: cart, total }));
        tg.close();
      };
    }

    function removeFromCart(index) {
      cart.splice(index, 1);
      localStorage.setItem("cart", JSON.stringify(cart));
      updateCart();
    }

    document.getElementById("user-name").textContent =
      "–ò–º—è: " + (tg.initDataUnsafe?.user?.first_name || "–ì–æ—Å—Ç—å");
  </script>
</body>
</html>
